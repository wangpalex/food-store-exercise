{"remainingRequest":"/Users/wangpei/bt3103-food-store-exercise/node_modules/babel-loader/lib/index.js!/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangpei/bt3103-food-store-exercise/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangpei/bt3103-food-store-exercise/src/components/Orders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangpei/bt3103-food-store-exercise/src/components/Orders.vue","mtime":1614481914038},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvVXNlcnMvd2FuZ3BlaS9idDMxMDMtZm9vZC1zdG9yZS1leGVyY2lzZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBkYiBmcm9tICIuLi9maXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiT3JkZXJzIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgb3JkZXJzOiBbXSwKICAgICAgYWxsSXRlbXM6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hPcmRlcnM6IGZ1bmN0aW9uIGZldGNoT3JkZXJzKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgZGIuY29sbGVjdGlvbignb3JkZXJzJykuZ2V0KCkudGhlbihmdW5jdGlvbiAoc25hcHNob3QpIHsKICAgICAgICBzbmFwc2hvdC5kb2NzLmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgY29uc29sZS5sb2coIkxvYWRlZCBvcmRlciBJbmZvcm1hdGlvbjogIik7CiAgICAgICAgICBjb25zb2xlLmxvZyhbZG9jLmlkLCBkb2MuZGF0YSgpLml0ZW1zXSk7CgogICAgICAgICAgX3RoaXMub3JkZXJzLnB1c2goewogICAgICAgICAgICBpZDogZG9jLmlkLAogICAgICAgICAgICBpdGVtczogZG9jLmRhdGEoKS5pdGVtcwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVycyk7CiAgICB9LAogICAgbG9nT3JkZXJzOiBmdW5jdGlvbiBsb2dPcmRlcnMoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ0aGlzLm9yZGVyczogIik7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMub3JkZXJzKTsKICAgIH0sCiAgICBvcmRlclN0cmluZzogZnVuY3Rpb24gb3JkZXJTdHJpbmcob3JkZXIpIHsKICAgICAgdmFyIHMgPSAiIjsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvcmRlciksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBzICs9IGl0ZW0ubmFtZSArICI6ICIgKyBpdGVtLmNvdW50ICsgIlxuIjsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHM7CiAgICB9LAogICAgZGVsZXRlT3JkZXI6IGZ1bmN0aW9uIGRlbGV0ZU9yZGVyKGV2ZW50KSB7CiAgICAgIHZhciBkb2NSZWYgPSBkYi5jb2xsZWN0aW9uKCdvcmRlcnMnKS5kb2MoZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnb3JkZXJJZCcpKTsKICAgICAgZG9jUmVmLmRlbGV0ZSgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICB9KTsKICAgIH0sCiAgICByb3V0ZTogZnVuY3Rpb24gcm91dGUoZXZlbnQpIHsKICAgICAgdmFyIGRvY19pZCA9IGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ29yZGVySWQnKTsKICAgICAgY29uc29sZS5sb2coImRvY19pZCBiZWZvcmUgcm91dGU6Iik7CiAgICAgIGNvbnNvbGUubG9nKGRvY19pZCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBuYW1lOiAibW9kaWZ5IiwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGRvY19pZDogZG9jX2lkCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIC8vIExpZmVDeWNsZSBob29rcwogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoT3JkZXJzKCk7CiAgfQp9Ow=="},{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,EAAA,MAAA,aAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GARA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,MAAA,EAAA,CAAA,UAAA,CAAA,QAAA,EAAA,GAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,4BAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,CAAA,EAAA,EAAA,GAAA,CAAA,IAAA,GAAA,KAAA,CAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA;AAAA,YAAA,EAAA,EAAA,GAAA,CAAA,EAAA;AAAA,YAAA,KAAA,EAAA,GAAA,CAAA,IAAA,GAAA;AAAA,WAAA;AACA,SAJA;AAKA,OANA;AAQA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA;AACA,KAXA;AAYA,IAAA,SAAA,EAAA,qBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,eAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA;AACA,KAfA;AAgBA,IAAA,WAAA,EAAA,qBAAA,KAAA,EAAA;AACA,UAAA,CAAA,GAAA,EAAA;;AADA,iDAEA,KAFA;AAAA;;AAAA;AAEA,4DAAA;AAAA,cAAA,IAAA;AACA,UAAA,CAAA,IAAA,IAAA,CAAA,IAAA,GAAA,IAAA,GAAA,IAAA,CAAA,KAAA,GAAA,IAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;;AAKA,aAAA,CAAA;AACA,KAtBA;AAuBA,IAAA,WAAA,EAAA,qBAAA,KAAA,EAAA;AACA,UAAA,MAAA,GAAA,EAAA,CAAA,UAAA,CAAA,QAAA,EAAA,GAAA,CAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,SAAA,CAAA,CAAA;AACA,MAAA,MAAA,CAAA,MAAA,GAAA,IAAA,CAAA,YAAA;AAAA,QAAA,QAAA,CAAA,MAAA;AAAA,OAAA;AACA,KA1BA;AA2BA,IAAA,KA3BA,iBA2BA,KA3BA,EA2BA;AACA,UAAA,MAAA,GAAA,KAAA,CAAA,MAAA,CAAA,YAAA,CAAA,SAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,sBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,QAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,MAAA,EAAA;AAAA;AAAA,OAAA;AACA;AAhCA,GAVA;AA8CA;AACA,EAAA,OA/CA,qBA+CA;AACA,SAAA,WAAA;AACA;AAjDA,CAAA","sourcesContent":["<template>\n<div>\n  <ul>\n    <li v-for=\"order in this.orders\" :key=\"order.id\">\n      <!-- <pre>{{orderString(order.items)}}</pre> -->\n      <p v-for=\"item in order.items\" :key=\"item.name\">\n        {{item.name}}: {{item.count}}\n      </p>\n      \n      <button v-bind:orderId=\"order.id\"\n              @click=\"logOrders(); deleteOrder($event)\">\n        Delete </button>\n\n      <button v-bind:orderId=\"order.id\"\n              @click=\"route($event)\"> Modify </button>\n    </li>\n  </ul>\n</div>\n</template>\n\n<script>\nimport db from \"../firebase\"\n\nexport default {\n  name: \"Orders\",\n\n  data() {\n    return {\n      orders: [],\n      allItems:[],\n    }\n  },\n\n  methods: {\n    fetchOrders: function() {\n      db.collection('orders').get().then(snapshot => {\n        snapshot.docs.forEach(doc => {\n          console.log(\"Loaded order Information: \");\n          console.log([doc.id, doc.data().items]);\n          this.orders.push({id:doc.id, items:doc.data().items});\n        });\n      });\n\n      console.log(this.orders);\n    },\n    logOrders: function() {\n      console.log(\"this.orders: \");\n      console.log(this.orders);\n    },\n    orderString: function(order) {\n      let s = \"\"\n      for(let item of order) {\n        s += item.name + \": \" + item.count + \"\\n\"\n      }\n      return s\n    },\n    deleteOrder: function(event) {\n      let docRef = db.collection('orders').doc(event.target.getAttribute('orderId'));\n      docRef.delete().then(()=>{location.reload()});\n    },\n    route(event) {\n      let doc_id = event.target.getAttribute('orderId');\n      console.log(\"doc_id before route:\");\n      console.log(doc_id);\n      this.$router.push({name:\"modify\", params: {doc_id: doc_id}});\n    }\n  },\n\n\n  // LifeCycle hooks\n  created() {\n    this.fetchOrders();\n  }\n}\n</script>\n\n<style scoped>\nul {\n  display: flex;\n  flex-wrap: wrap;\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  flex-grow: 1;\n  flex-basis: 300px;\n  text-align: center;\n  padding: 10px;\n  border: 1px solid #222;\n  margin: 10px;\n}\n\nbutton {\n  width: 65px;\n  height: 30px;\n  background-color: #f7cac9;\n  border-radius: 10px;\n  border-width: 1px;\n}\n</style>"],"sourceRoot":"src/components"}]}