{"remainingRequest":"/Users/wangpei/bt3103-food-store-exercise/node_modules/babel-loader/lib/index.js!/Users/wangpei/bt3103-food-store-exercise/node_modules/eslint-loader/index.js??ref--13-0!/Users/wangpei/bt3103-food-store-exercise/src/components/Charts/BarChart.js","dependencies":[{"path":"/Users/wangpei/bt3103-food-store-exercise/src/components/Charts/BarChart.js","mtime":1615087985128},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCB7IEJhciB9IGZyb20gJ3Z1ZS1jaGFydGpzJzsKaW1wb3J0IGRhdGFiYXNlIGZyb20gJy4uLy4uL2ZpcmViYXNlLmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIGV4dGVuZHM6IEJhciwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXRlbUNvdW50OiB7fSwKICAgICAgZGF0YWNvbGxlY3Rpb246IHsKICAgICAgICBsYWJlbHM6IFtdLAogICAgICAgIGRhdGFzZXRzOiBbewogICAgICAgICAgbGFiZWw6ICJQb3B1bGF0aW9uIChtaWxsaW9ucykiLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBbIiMzZTk1Y2QiLCAiIzhlNWVhMiIsICIjM2NiYTlmIiwgIiNlOGMzYjkiLCAiI2M0NTg1MCIsICIjZTdhMjQwIl0sCiAgICAgICAgICBkYXRhOiBbXQogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgIGRpc3BsYXk6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICB0aXRsZTogewogICAgICAgICAgZGlzcGxheTogdHJ1ZSwKICAgICAgICAgIHRleHQ6ICdUb3RhbCBudW1iZXIgb2YgZWFjaCBkaXNoJwogICAgICAgIH0sCiAgICAgICAgcmVzcG9uc2l2ZTogdHJ1ZSwKICAgICAgICBtYWludGFpbkFzcGVjdFJhdGlvOiBmYWxzZSwKICAgICAgICBiZWdpbkF0WmVybzogdHJ1ZQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hJdGVtczogZnVuY3Rpb24gZmV0Y2hJdGVtcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGRhdGFiYXNlLmNvbGxlY3Rpb24oJ29yZGVycycpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcFNob3QpIHsKICAgICAgICBxdWVyeVNuYXBTaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgZG9jLmRhdGEoKS5pdGVtcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIGlmICghKGl0ZW0ubmFtZSBpbiBfdGhpcy5pdGVtQ291bnQpKSB7CiAgICAgICAgICAgICAgX3RoaXMuaXRlbUNvdW50W2l0ZW0ubmFtZV0gPSBOdW1iZXIoaXRlbS5jb3VudCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuaXRlbUNvdW50W2l0ZW0ubmFtZV0gKz0gTnVtYmVyKGl0ZW0uY291bnQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiSXRlbSBjb3VudDogIik7CiAgICAgICAgY29uc29sZS5sb2coX3RoaXMuaXRlbUNvdW50KTsKCiAgICAgICAgZm9yICh2YXIga2V5IGluIF90aGlzLml0ZW1Db3VudCkgewogICAgICAgICAgY29uc29sZS5sb2coa2V5KTsKICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzLml0ZW1Db3VudFtrZXldKTsKCiAgICAgICAgICBfdGhpcy5kYXRhY29sbGVjdGlvbi5sYWJlbHMucHVzaChrZXkpOwoKICAgICAgICAgIF90aGlzLmRhdGFjb2xsZWN0aW9uLmRhdGFzZXRzWzBdLmRhdGEucHVzaChfdGhpcy5pdGVtQ291bnRba2V5XSk7IC8vdGhpcy5kYXRhY29sbGVjdGlvbi5kYXRhc2V0c1swXS5iYWNrZ3JvdW5kQ29sb3IucHVzaCh0aGlzLml0ZW1Db3VudFtrZXldKQoKICAgICAgICB9CgogICAgICAgIF90aGlzLnJlbmRlckNoYXJ0KF90aGlzLmRhdGFjb2xsZWN0aW9uLCBfdGhpcy5vcHRpb25zKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaEl0ZW1zKCk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/wangpei/bt3103-food-store-exercise/src/components/Charts/BarChart.js"],"names":["Bar","database","extends","data","itemCount","datacollection","labels","datasets","label","backgroundColor","options","legend","display","title","text","responsive","maintainAspectRatio","beginAtZero","methods","fetchItems","collection","get","then","querySnapShot","forEach","doc","items","item","name","Number","count","console","log","key","push","renderChart","created"],"mappings":";;;;AAAA,SAASA,GAAT,QAAoB,aAApB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AAEA,eAAe;AACXC,EAAAA,OAAO,EAAEF,GADE;AAEXG,EAAAA,IAAI,EAAE,gBAAY;AACd,WAAO;AACHC,MAAAA,SAAS,EAAE,EADR;AAGHC,MAAAA,cAAc,EAAE;AACZC,QAAAA,MAAM,EAAE,EADI;AAEZC,QAAAA,QAAQ,EAAE,CAAC;AACPC,UAAAA,KAAK,EAAE,uBADA;AAEPC,UAAAA,eAAe,EAAE,CAAC,SAAD,EAAY,SAAZ,EAAsB,SAAtB,EAAgC,SAAhC,EAA0C,SAA1C,EAAqD,SAArD,CAFV;AAGPN,UAAAA,IAAI,EAAE;AAHC,SAAD;AAFE,OAHb;AAWHO,MAAAA,OAAO,EAAE;AACLC,QAAAA,MAAM,EAAE;AAAEC,UAAAA,OAAO,EAAE;AAAX,SADH;AAELC,QAAAA,KAAK,EAAE;AACHD,UAAAA,OAAO,EAAE,IADN;AAEHE,UAAAA,IAAI,EAAE;AAFH,SAFF;AAMLC,QAAAA,UAAU,EAAE,IANP;AAOLC,QAAAA,mBAAmB,EAAE,KAPhB;AAQLC,QAAAA,WAAW,EAAE;AARR;AAXN,KAAP;AAsBH,GAzBU;AA0BXC,EAAAA,OAAO,EAAE;AACLC,IAAAA,UAAU,EAAE,sBAAY;AAAA;;AACpBlB,MAAAA,QAAQ,CAACmB,UAAT,CAAoB,QAApB,EAA8BC,GAA9B,GAAoCC,IAApC,CAAyC,UAAAC,aAAa,EAAI;AACtDA,QAAAA,aAAa,CAACC,OAAd,CAAsB,UAAAC,GAAG,EAAI;AACzBA,UAAAA,GAAG,CAACtB,IAAJ,GAAWuB,KAAX,CAAiBF,OAAjB,CAAyB,UAAAG,IAAI,EAAI;AAC7B,gBAAG,EAAEA,IAAI,CAACC,IAAL,IAAa,KAAI,CAACxB,SAApB,CAAH,EAAmC;AAC/B,cAAA,KAAI,CAACA,SAAL,CAAeuB,IAAI,CAACC,IAApB,IAA4BC,MAAM,CAACF,IAAI,CAACG,KAAN,CAAlC;AACH,aAFD,MAEO;AACH,cAAA,KAAI,CAAC1B,SAAL,CAAeuB,IAAI,CAACC,IAApB,KAA6BC,MAAM,CAACF,IAAI,CAACG,KAAN,CAAnC;AACH;AACJ,WAND;AAOH,SARD;AASAC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAAC5B,SAAjB;;AACA,aAAI,IAAI6B,GAAR,IAAe,KAAI,CAAC7B,SAApB,EAA+B;AAC3B2B,UAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;AACAF,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAAC5B,SAAL,CAAe6B,GAAf,CAAZ;;AACA,UAAA,KAAI,CAAC5B,cAAL,CAAoBC,MAApB,CAA2B4B,IAA3B,CAAgCD,GAAhC;;AACA,UAAA,KAAI,CAAC5B,cAAL,CAAoBE,QAApB,CAA6B,CAA7B,EAAgCJ,IAAhC,CAAqC+B,IAArC,CAA0C,KAAI,CAAC9B,SAAL,CAAe6B,GAAf,CAA1C,EAJ2B,CAK3B;;AACH;;AAED,QAAA,KAAI,CAACE,WAAL,CAAiB,KAAI,CAAC9B,cAAtB,EAAsC,KAAI,CAACK,OAA3C;AACH,OArBD;AAsBH;AAxBI,GA1BE;AAoDX0B,EAAAA,OApDW,qBAoDA;AACP,SAAKjB,UAAL;AACH;AAtDU,CAAf","sourcesContent":["import { Bar } from 'vue-chartjs'\nimport database from '../../firebase.js'\n\nexport default {\n    extends: Bar,\n    data: function () {\n        return {\n            itemCount: {},\n\n            datacollection: {\n                labels: [],\n                datasets: [{\n                    label: \"Population (millions)\",\n                    backgroundColor: [\"#3e95cd\", \"#8e5ea2\",\"#3cba9f\",\"#e8c3b9\",\"#c45850\", \"#e7a240\"],\n                    data: []\n                }]\n            },\n            options: {\n                legend: { display: false },\n                title: {\n                    display: true,\n                    text: 'Total number of each dish'\n                },\n                responsive: true,\n                maintainAspectRatio: false,\n                beginAtZero: true,\n            }\n        }\n    },\n    methods: {\n        fetchItems: function () {\n            database.collection('orders').get().then(querySnapShot => {\n                querySnapShot.forEach(doc => {\n                    doc.data().items.forEach(item => {\n                        if(!(item.name in this.itemCount)) {\n                            this.itemCount[item.name] = Number(item.count)\n                        } else {\n                            this.itemCount[item.name] += Number(item.count)\n                        }\n                    })\n                })\n                console.log(\"Item count: \")\n                console.log(this.itemCount)\n                for(let key in this.itemCount) {\n                    console.log(key)\n                    console.log(this.itemCount[key])\n                    this.datacollection.labels.push(key)\n                    this.datacollection.datasets[0].data.push(this.itemCount[key])\n                    //this.datacollection.datasets[0].backgroundColor.push(this.itemCount[key])\n                }\n\n                this.renderChart(this.datacollection, this.options)\n            })\n        }\n    },\n    created () {\n        this.fetchItems()\n    }\n}"]}]}