{"remainingRequest":"/Users/wangpei/bt3103-food-store-exercise/node_modules/babel-loader/lib/index.js!/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/wangpei/bt3103-food-store-exercise/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangpei/bt3103-food-store-exercise/src/components/Modify.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangpei/bt3103-food-store-exercise/src/components/Modify.vue","mtime":1614493088947},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBkYiBmcm9tICIuLi9maXJlYmFzZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTW9kaWZ5IiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YXBhY2tldDogW10sCiAgICAgIGRhdGFDb3B5OiBbXQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBkb2NfaWQ6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaEl0ZW1zOiBmdW5jdGlvbiBmZXRjaEl0ZW1zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coIiRyb3V0ZS5wYXJhbXMgYWZ0ZXIgcm91dGU6ICIpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMpOwogICAgICB2YXIgZG9jUmVmID0gZGIuY29sbGVjdGlvbignb3JkZXJzJykuZG9jKHRoaXMuJHJvdXRlLnBhcmFtcy5kb2NfaWQpOwogICAgICBkb2NSZWYuZ2V0KCkudGhlbihmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgaWYgKGRvYy5leGlzdHMpIHsKICAgICAgICAgIF90aGlzLmRhdGFwYWNrZXQgPSBkb2MuZGF0YSgpLml0ZW1zOyAvLyBEZWVwIGNvcHkgZGF0YQoKICAgICAgICAgIF90aGlzLmRhdGFwYWNrZXQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICBfdGhpcy5kYXRhQ29weS5wdXNoKHsKICAgICAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgICAgICAgY291bnQ6IGl0ZW0uY291bnQsCiAgICAgICAgICAgICAgcHJpY2U6IGl0ZW0ucHJpY2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBjb25zb2xlLmxvZygiTW9kaWZ5IHBhZ2UgZGF0YSBmZXRjaDogIik7CiAgICAgICAgICBjb25zb2xlLmxvZyhkb2MuZGF0YSgpLml0ZW1zKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coIk5vIHN1Y2ggZG9jdW1lbnQhIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVPcmRlcjogZnVuY3Rpb24gdXBkYXRlT3JkZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGRvY1JlZiA9IGRiLmNvbGxlY3Rpb24oJ29yZGVycycpLmRvYyh0aGlzLiRyb3V0ZS5wYXJhbXMuZG9jX2lkKTsKICAgICAgZG9jUmVmLnVwZGF0ZSh7CiAgICAgICAgaXRlbXM6IHRoaXMuZGF0YUNvcHkKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgib3JkZXJzIik7CiAgICAgIH0pOwogICAgfSwKICAgIGxvZ0RhdGE6IGZ1bmN0aW9uIGxvZ0RhdGEoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJkYXRhcGFja2V0OiAiKTsKICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhcGFja2V0KTsKICAgICAgY29uc29sZS5sb2coImRhdGFDb3B5OiAiKTsKICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhQ29weSk7CiAgICB9CiAgfSwKICAvLyBMaWZlY3ljbGUgaG9va3MKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaEl0ZW1zKCk7CiAgfQp9Ow=="},{"version":3,"sources":["Modify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAgBA,OAAA,EAAA,MAAA,aAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAGA,EAAA,IAHA,kBAGA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GARA;AAUA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AADA,GAVA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,6BAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,MAAA,CAAA,MAAA;AACA,UAAA,MAAA,GAAA,EAAA,CAAA,UAAA,CAAA,QAAA,EAAA,GAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA;AAEA,MAAA,MAAA,CAAA,GAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,GAAA,CAAA,IAAA,GAAA,KAAA,CADA,CAGA;;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA;AAAA,cAAA,IAAA,EAAA,IAAA,CAAA,IAAA;AAAA,cAAA,KAAA,EAAA,IAAA,CAAA,KAAA;AAAA,cAAA,KAAA,EAAA,IAAA,CAAA;AAAA,aAAA;AACA,WAFA;;AAGA,UAAA,OAAA,CAAA,GAAA,CAAA,0BAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,GAAA,CAAA,IAAA,GAAA,KAAA;AACA,SATA,MASA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,mBAAA;AACA;AACA,OAbA;AAcA,KApBA;AAsBA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,UAAA,MAAA,GAAA,EAAA,CAAA,UAAA,CAAA,QAAA,EAAA,GAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA;AAEA,MAAA,MAAA,CAAA,MAAA,CAAA;AACA,QAAA,KAAA,EAAA,KAAA;AADA,OAAA,EAEA,IAFA,CAEA,YAAA;AAAA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AAAA,OAFA;AAGA,KA5BA;AA8BA,IAAA,OA9BA,qBA8BA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,UAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,YAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AACA;AAnCA,GAhBA;AAuDA;AACA,EAAA,OAxDA,qBAwDA;AACA,SAAA,UAAA;AACA;AA1DA,CAAA","sourcesContent":["<template>\n<div>\n  <ul>\n    <li v-for=\"(item, index) in datapacket\" :key=\"index\">\n      {{item.name}}: {{item.count}}\n      <input id=\"index\" v-model.lazy=\"dataCopy[index].count\" type=\"number\" placeholder=\"0\" min=\"0\" max=\"10\">\n\n    </li>\n    <button @click=\"updateOrder\"> Update Order </button>\n  </ul>\n\n  <!-- <button @click=\"logData()\"> log data copy </button> -->\n</div>\n</template>\n\n<script>\nimport db from \"../firebase\"\n\nexport default {\n  name: \"Modify\",\n\n  data() {\n    return {\n      datapacket:[],\n      dataCopy:[],\n    }\n  },\n\n  props: {\n    doc_id: {\n      type: String\n    },\n  },\n\n  methods: {\n    fetchItems() {\n      console.log(\"$route.params after route: \");\n      console.log(this.$route.params);\n      const docRef = db.collection('orders').doc(this.$route.params.doc_id);\n\n      docRef.get().then(doc => {\n        if(doc.exists) {\n          this.datapacket = doc.data().items;\n\n          // Deep copy data\n          this.datapacket.forEach(item => {\n            this.dataCopy.push({name:item.name, count:item.count, price:item.price})\n          });\n          console.log(\"Modify page data fetch: \");\n          console.log(doc.data().items);\n        } else {\n          console.log(\"No such document!\");\n        }\n      });\n    },\n\n    updateOrder: function () {\n      const docRef = db.collection('orders').doc(this.$route.params.doc_id);\n\n      docRef.update({\n        items: this.dataCopy\n      }).then(() => { this.$router.push(\"orders\") });\n    },\n\n    logData() {\n      console.log(\"datapacket: \");\n      console.log(this.datapacket);\n      console.log(\"dataCopy: \");\n      console.log(this.dataCopy);\n    },\n\n  },\n\n  // Lifecycle hooks\n  created() {\n    this.fetchItems();\n  }\n}\n</script>\n\n<style scoped>\nbutton {\n  width: 65px;\n  height: 30px;\n  background-color: #f7cac9;\n  border-radius: 10px;\n  border-width: 1px;\n}\n\n\nli {\n  flex-grow: 1;\n  flex-basis: 300px;\n  text-align: center;\n  padding: 10px;\n  border: 1px solid #222;\n  margin: 10px;\n}\n</style>"],"sourceRoot":"src/components"}]}