{"remainingRequest":"/Users/wangpei/bt3103-food-store-exercise/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangpei/bt3103-food-store-exercise/src/components/Orders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangpei/bt3103-food-store-exercise/src/components/Orders.vue","mtime":1614481914038},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-food-store-exercise/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkYiBmcm9tICIuLi9maXJlYmFzZSIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiT3JkZXJzIiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9yZGVyczogW10sCiAgICAgIGFsbEl0ZW1zOltdLAogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGZldGNoT3JkZXJzOiBmdW5jdGlvbigpIHsKICAgICAgZGIuY29sbGVjdGlvbignb3JkZXJzJykuZ2V0KCkudGhlbihzbmFwc2hvdCA9PiB7CiAgICAgICAgc25hcHNob3QuZG9jcy5mb3JFYWNoKGRvYyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygiTG9hZGVkIG9yZGVyIEluZm9ybWF0aW9uOiAiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKFtkb2MuaWQsIGRvYy5kYXRhKCkuaXRlbXNdKTsKICAgICAgICAgIHRoaXMub3JkZXJzLnB1c2goe2lkOmRvYy5pZCwgaXRlbXM6ZG9jLmRhdGEoKS5pdGVtc30pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMub3JkZXJzKTsKICAgIH0sCiAgICBsb2dPcmRlcnM6IGZ1bmN0aW9uKCkgewogICAgICBjb25zb2xlLmxvZygidGhpcy5vcmRlcnM6ICIpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm9yZGVycyk7CiAgICB9LAogICAgb3JkZXJTdHJpbmc6IGZ1bmN0aW9uKG9yZGVyKSB7CiAgICAgIGxldCBzID0gIiIKICAgICAgZm9yKGxldCBpdGVtIG9mIG9yZGVyKSB7CiAgICAgICAgcyArPSBpdGVtLm5hbWUgKyAiOiAiICsgaXRlbS5jb3VudCArICJcbiIKICAgICAgfQogICAgICByZXR1cm4gcwogICAgfSwKICAgIGRlbGV0ZU9yZGVyOiBmdW5jdGlvbihldmVudCkgewogICAgICBsZXQgZG9jUmVmID0gZGIuY29sbGVjdGlvbignb3JkZXJzJykuZG9jKGV2ZW50LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ29yZGVySWQnKSk7CiAgICAgIGRvY1JlZi5kZWxldGUoKS50aGVuKCgpPT57bG9jYXRpb24ucmVsb2FkKCl9KTsKICAgIH0sCiAgICByb3V0ZShldmVudCkgewogICAgICBsZXQgZG9jX2lkID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnb3JkZXJJZCcpOwogICAgICBjb25zb2xlLmxvZygiZG9jX2lkIGJlZm9yZSByb3V0ZToiKTsKICAgICAgY29uc29sZS5sb2coZG9jX2lkKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe25hbWU6Im1vZGlmeSIsIHBhcmFtczoge2RvY19pZDogZG9jX2lkfX0pOwogICAgfQogIH0sCgoKICAvLyBMaWZlQ3ljbGUgaG9va3MKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaE9yZGVycygpOwogIH0KfQo="},{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA","file":"Orders.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <ul>\n    <li v-for=\"order in this.orders\" :key=\"order.id\">\n      <!-- <pre>{{orderString(order.items)}}</pre> -->\n      <p v-for=\"item in order.items\" :key=\"item.name\">\n        {{item.name}}: {{item.count}}\n      </p>\n      \n      <button v-bind:orderId=\"order.id\"\n              @click=\"logOrders(); deleteOrder($event)\">\n        Delete </button>\n\n      <button v-bind:orderId=\"order.id\"\n              @click=\"route($event)\"> Modify </button>\n    </li>\n  </ul>\n</div>\n</template>\n\n<script>\nimport db from \"../firebase\"\n\nexport default {\n  name: \"Orders\",\n\n  data() {\n    return {\n      orders: [],\n      allItems:[],\n    }\n  },\n\n  methods: {\n    fetchOrders: function() {\n      db.collection('orders').get().then(snapshot => {\n        snapshot.docs.forEach(doc => {\n          console.log(\"Loaded order Information: \");\n          console.log([doc.id, doc.data().items]);\n          this.orders.push({id:doc.id, items:doc.data().items});\n        });\n      });\n\n      console.log(this.orders);\n    },\n    logOrders: function() {\n      console.log(\"this.orders: \");\n      console.log(this.orders);\n    },\n    orderString: function(order) {\n      let s = \"\"\n      for(let item of order) {\n        s += item.name + \": \" + item.count + \"\\n\"\n      }\n      return s\n    },\n    deleteOrder: function(event) {\n      let docRef = db.collection('orders').doc(event.target.getAttribute('orderId'));\n      docRef.delete().then(()=>{location.reload()});\n    },\n    route(event) {\n      let doc_id = event.target.getAttribute('orderId');\n      console.log(\"doc_id before route:\");\n      console.log(doc_id);\n      this.$router.push({name:\"modify\", params: {doc_id: doc_id}});\n    }\n  },\n\n\n  // LifeCycle hooks\n  created() {\n    this.fetchOrders();\n  }\n}\n</script>\n\n<style scoped>\nul {\n  display: flex;\n  flex-wrap: wrap;\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  flex-grow: 1;\n  flex-basis: 300px;\n  text-align: center;\n  padding: 10px;\n  border: 1px solid #222;\n  margin: 10px;\n}\n\nbutton {\n  width: 65px;\n  height: 30px;\n  background-color: #f7cac9;\n  border-radius: 10px;\n  border-width: 1px;\n}\n</style>"]}]}