{"remainingRequest":"/Users/wangpei/bt3103-week-4/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangpei/bt3103-week-4/src/components/Modify.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/wangpei/bt3103-week-4/src/components/Modify.vue","mtime":1614440680607},{"path":"/Users/wangpei/bt3103-week-4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-week-4/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/wangpei/bt3103-week-4/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wangpei/bt3103-week-4/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBkYiBmcm9tICIuLi9maXJlYmFzZSIKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTW9kaWZ5IiwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGFwYWNrZXQ6W10sCiAgICAgIGRhdGFDb3B5OltdLAogICAgfQogIH0sCgogIHByb3BzOiB7CiAgICBkb2NfaWQ6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIGZldGNoSXRlbXMoKSB7CiAgICAgIGNvbnNvbGUubG9nKCIkcm91dGUucGFyYW1zIGFmdGVyIHJvdXRlOiAiKTsKICAgICAgY29uc29sZS5sb2codGhpcy4kcm91dGUucGFyYW1zKTsKICAgICAgY29uc3QgZG9jUmVmID0gZGIuY29sbGVjdGlvbignb3JkZXJzJykuZG9jKHRoaXMuJHJvdXRlLnBhcmFtcy5kb2NfaWQpOwoKICAgICAgZG9jUmVmLmdldCgpLnRoZW4oZG9jID0+IHsKICAgICAgICBpZihkb2MuZXhpc3RzKSB7CiAgICAgICAgICB0aGlzLmRhdGFwYWNrZXQgPSBkb2MuZGF0YSgpLml0ZW1zOwogICAgICAgICAgdGhpcy5kYXRhQ29weSA9IHRoaXMuZGF0YXBhY2tldC5tYXAoeCA9PiB4KTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJNb2RpZnkgcGFnZSBkYXRhIGZldGNoOiAiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKGRvYy5kYXRhKCkuaXRlbXMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiTm8gc3VjaCBkb2N1bWVudCEiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICB1cGRhdGVPcmRlcjogZnVuY3Rpb24gKCkgewogICAgICBjb25zdCBkb2NSZWYgPSBkYi5jb2xsZWN0aW9uKCdvcmRlcnMnKS5kb2ModGhpcy4kcm91dGUucGFyYW1zLmRvY19pZCk7CgogICAgICBkb2NSZWYuc2V0KHsKICAgICAgICBpdGVtczogdGhpcy5kYXRhcGFja2V0CiAgICAgIH0pLnRoZW4oKCkgPT4geyB0aGlzLiRyb3V0ZXIucHVzaCgib3JkZXJzIikgfSk7CiAgICB9LAoKICAgIGxvZ0RhdGEoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJkYXRhcGFja2V0OiAiKTsKICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhcGFja2V0KTsKICAgICAgY29uc29sZS5sb2coImRhdGFDb3B5OiAiKTsKICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhQ29weSk7CiAgICB9LAoKICB9LAoKICAvLyBMaWZlY3ljbGUgaG9va3MKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaEl0ZW1zKCk7CiAgfQp9Cg=="},{"version":3,"sources":["Modify.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA","file":"Modify.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<div>\n  <ul>\n    <li v-for=\"(item, index) in datapacket\" :key=\"index\">\n      {{item.name}}: {{item.count}}\n      <input id=\"index\" v-model.lazy=\"item.count\" type=\"number\" placeholder=\"0\" min=\"0\" max=\"10\">\n\n    </li>\n    <button @click=\"updateOrder\"> Update Order </button>\n  </ul>\n\n  <!-- <button @click=\"logData()\"> log data copy </button> -->\n</div>\n</template>\n\n<script>\nimport db from \"../firebase\"\n\nexport default {\n  name: \"Modify\",\n\n  data() {\n    return {\n      datapacket:[],\n      dataCopy:[],\n    }\n  },\n\n  props: {\n    doc_id: {\n      type: String\n    },\n  },\n\n  methods: {\n    fetchItems() {\n      console.log(\"$route.params after route: \");\n      console.log(this.$route.params);\n      const docRef = db.collection('orders').doc(this.$route.params.doc_id);\n\n      docRef.get().then(doc => {\n        if(doc.exists) {\n          this.datapacket = doc.data().items;\n          this.dataCopy = this.datapacket.map(x => x);\n          console.log(\"Modify page data fetch: \");\n          console.log(doc.data().items);\n        } else {\n          console.log(\"No such document!\");\n        }\n      });\n    },\n\n    updateOrder: function () {\n      const docRef = db.collection('orders').doc(this.$route.params.doc_id);\n\n      docRef.set({\n        items: this.datapacket\n      }).then(() => { this.$router.push(\"orders\") });\n    },\n\n    logData() {\n      console.log(\"datapacket: \");\n      console.log(this.datapacket);\n      console.log(\"dataCopy: \");\n      console.log(this.dataCopy);\n    },\n\n  },\n\n  // Lifecycle hooks\n  created() {\n    this.fetchItems();\n  }\n}\n</script>\n\n<style scoped>\nbutton {\n  width: 65px;\n  height: 30px;\n  background-color: #f7cac9;\n  border-radius: 10px;\n  border-width: 1px;\n}\n</style>"]}]}